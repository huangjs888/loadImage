function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},t.apply(this,arguments)}const e=function(t,e){return new Promise(((n,o)=>{const r=new XMLHttpRequest;r.onprogress=t=>{t.lengthComputable&&"function"==typeof e&&e(t)},r.onloadend=t=>{r.status>=200&&300>r.status||304===r.status?n(URL.createObjectURL(r.response)):o(t)},r.open("GET",t),r.responseType="blob",r.send()}))};let n=!1;function o(){if(n)return;const{prototype:o}=HTMLImageElement,r=Object.getOwnPropertyDescriptor(o,"src");return r?(n=!0,Object.defineProperty(o,"src",t({},r,{set:function(t,...n){if(r.set){const o=r.set;t&&0!==t.indexOf("blob:")?e(t,this.onprogress).then((t=>{const e=this.onload;this.onload=function(n){URL.revokeObjectURL(t),e&&e.call(this,n)},o.call(this,t,...n)})).catch((()=>{o.call(this,t,...n)})):o.call(this,t,...n)}}})),()=>{n=!1,Object.defineProperty(o,"src",r)}):void 0}const r=function(t,e){return new Promise(((n,o)=>{const r=new Image,s=()=>{r.onload=null,r.onprogress=null,r.onerror=null};r.onload=()=>{n(r),s()},r.onerror=t=>{o(t),s()},"function"==typeof e&&(r.onprogress=t=>e(t.loaded/t.total)),r.src=t}))};function s(t,n){return"function"==typeof n?e(t,(t=>n(t.loaded/t.total))).then((t=>r(t).then((e=>(URL.revokeObjectURL(t),e))))).catch((()=>r(t))):r(t)}export{s as default,o as hijackImage,r as loadImageBase};
//# sourceMappingURL=loadImage.min.js.map
